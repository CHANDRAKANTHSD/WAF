================================================================================
                        DDoS DETECTION SYSTEM WORKFLOW
================================================================================

TRAINING WORKFLOW
-----------------

    ┌─────────────────────────────────────────────────────────────────┐
    │                    START: ddos_detection.py                     │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 1: Load Datasets (7 files)                                │
    │  ├─ CICIDS2017 (3 files)                                        │
    │  ├─ CSE-CIC-IDS2018 (3 files)                                   │
    │  └─ TON_IoT (1 file)                                            │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 2: Preprocessing                                          │
    │  ├─ Handle missing values → fillna(0)                           │
    │  ├─ Convert to numeric                                          │
    │  ├─ Remove infinite values                                      │
    │  └─ Binary labels (DDoS=1, Normal=0)                            │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 3: Feature Selection                                      │
    │  └─ SelectKBest (top 30 features)                               │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 4: Train/Test Split                                       │
    │  └─ 80% train / 20% test                                        │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 5: Handle Imbalance                                       │
    │  └─ SMOTE oversampling                                          │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 6: Normalization                                          │
    │  └─ StandardScaler                                              │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 7: Model Training                                         │
    │  ├─ Train LightGBM                                              │
    │  └─ Train XGBoost                                               │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 8: Evaluation                                             │
    │  ├─ Accuracy                                                    │
    │  ├─ Precision                                                   │
    │  ├─ Recall                                                      │
    │  ├─ F1-Score                                                    │
    │  └─ Inference Time                                              │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 9: Model Comparison                                       │
    │  └─ Select best model (highest F1-Score)                        │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  STEP 10: Export                                                │
    │  ├─ Save model (.pkl, .joblib)                                  │
    │  ├─ Save scaler (.joblib)                                       │
    │  ├─ Save features (.pkl)                                        │
    │  └─ Generate feature importance plot (.png)                     │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    END: Model Ready for Deployment              │
    └─────────────────────────────────────────────────────────────────┘


INFERENCE WORKFLOW
------------------

    ┌─────────────────────────────────────────────────────────────────┐
    │                    START: New Network Traffic                   │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Load Trained Components                                        │
    │  ├─ Model (.joblib)                                             │
    │  ├─ Scaler (.joblib)                                            │
    │  └─ Features (.pkl)                                             │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Preprocess Input                                               │
    │  ├─ Select required features                                    │
    │  ├─ Handle missing values                                       │
    │  └─ Scale features                                              │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Make Prediction                                                │
    │  ├─ model.predict()                                             │
    │  └─ model.predict_proba()                                       │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Return Result                                                  │
    │  ├─ Prediction (DDoS / Normal)                                  │
    │  ├─ Confidence (0-1)                                            │
    │  ├─ Probabilities                                               │
    │  └─ Inference time                                              │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    END: Prediction Complete                     │
    └─────────────────────────────────────────────────────────────────┘


API WORKFLOW
------------

    ┌─────────────────────────────────────────────────────────────────┐
    │                    START: API Server (api.py)                   │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Initialize                                                     │
    │  └─ Load model, scaler, features (once at startup)             │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Listen on Port 5000                                            │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Receive HTTP Request                                           │
    │  ├─ GET  /health                                                │
    │  ├─ POST /predict                                               │
    │  ├─ POST /predict/batch                                         │
    │  └─ GET  /model/info                                            │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Process Request                                                │
    │  ├─ Validate input                                              │
    │  ├─ Call inference engine                                       │
    │  └─ Format response                                             │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Return JSON Response                                           │
    │  └─ {success, prediction, confidence, ...}                      │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    END: Response Sent                           │
    └─────────────────────────────────────────────────────────────────┘


INTEGRATION WORKFLOW
--------------------

    ┌─────────────────────────────────────────────────────────────────┐
    │                    Your Application                             │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Capture Network Traffic                                        │
    │  └─ Extract features (flow duration, packets, bytes, etc.)      │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Send to DDoS Detection API                                     │
    │  └─ POST /predict with features                                 │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Receive Prediction                                             │
    │  └─ {prediction: "DDoS Attack", confidence: 0.95}               │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │  Take Action                                                    │
    │  ├─ If DDoS detected:                                           │
    │  │  ├─ Block IP address                                         │
    │  │  ├─ Alert security team                                      │
    │  │  ├─ Log incident                                             │
    │  │  └─ Apply rate limiting                                      │
    │  └─ If Normal:                                                  │
    │     └─ Allow traffic                                            │
    └────────────────────────────┬────────────────────────────────────┘
                                 │
                                 ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                    END: Action Completed                        │
    └─────────────────────────────────────────────────────────────────┘


DATA FLOW
---------

    Raw CSV Files
         │
         ├─ CICIDS2017 (3 files)
         ├─ CSE-CIC-IDS2018 (3 files)
         └─ TON_IoT (1 file)
         │
         ▼
    Preprocessing
         │
         ├─ Clean data
         ├─ Handle missing values
         └─ Convert labels
         │
         ▼
    Feature Engineering
         │
         ├─ Select top 30 features
         └─ Normalize with StandardScaler
         │
         ▼
    Model Training
         │
         ├─ LightGBM
         └─ XGBoost
         │
         ▼
    Model Evaluation
         │
         └─ Compare metrics
         │
         ▼
    Best Model Selection
         │
         └─ Highest F1-Score
         │
         ▼
    Export
         │
         ├─ model.joblib
         ├─ scaler.joblib
         └─ features.pkl
         │
         ▼
    Deployment
         │
         ├─ REST API
         ├─ Direct Integration
         └─ Microservice
         │
         ▼
    Production Use
         │
         └─ Real-time DDoS Detection


FILE DEPENDENCIES
-----------------

    config.py
         │
         └─> ddos_detection.py
                  │
                  ├─> Generates: model.joblib
                  ├─> Generates: scaler.joblib
                  └─> Generates: features.pkl
                           │
                           └─> inference.py
                                    │
                                    ├─> api.py (REST API)
                                    └─> Your Application


EXECUTION ORDER
---------------

    1. test_setup.py        (Verify installation)
         │
         ▼
    2. ddos_detection.py    (Train models)
         │
         ▼
    3. inference.py         (Test predictions)
         │
         ▼
    4. api.py               (Start API server)
         │
         ▼
    5. test_api.py          (Test API endpoints)
         │
         ▼
    6. Integration          (Use in your app)


================================================================================
                              END OF WORKFLOW
================================================================================
